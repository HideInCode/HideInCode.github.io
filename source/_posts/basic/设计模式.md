---
title: 设计模式
date: 2019-06-06
categories:
- 基础知识
tags:
- design pattern
---



## 设计模式

> 代码的设计本质上就是两个部分
>
> 1. 职责划分
> 2. 模块通信



## 单一职责(Single Responsibility)

> 类在命名时就应该想好职责，一个类只做一件事。

## 开闭原则(Open Close)

> 对拓展开放，对修改关闭。

## 接口隔离(Interface Segregation)

> 不能强迫用户使用他们不需要的接口。

- 如果一个接口只需部分方法就可以完成职责的话，那么这个接口的职责就不单一了，要考虑重新拆分。
- 接口制定尽量细小化，单一化，避免肥胖接口。

## 依赖倒置(Dependence Inversion)

> 抽象不依赖细节，高层不依赖底层。

- 应该依赖抽象接口而非具体实现。
- 使用接口避免了传递依赖，即不用引用实现类中依赖的对象。

## 替换原则(Liskov Substitution)

> 子类可以替换父类使用。

需要做到以下

- 非必要不重写父类非抽象方法。
- 子类的产生主要是为了新增自己的方法。
- overload父类方法时：
  - 子类中的方法参数要更加宽松。这样替换成父类时，子类父类可以做的事子类也可以做，不会因为入参有影响。
  - 子类中的方法返回值要更加严格。防止改变父类功能，对于执行的结果，子类要对结果更加负责，否则会导致没办法替换父类。

继承是一种强制通信，即子类一定要接受父类的属性与方法，避免不了高耦合，所以组合优于继承。

当规定一个父类的所有子类都满足不重写父类已经实现类时，那么父类的具体方法才得到完美的复用。

如果非要重写父类已经实现的方法的话，打破继承关系，直接封装新类，然后用组合的方式引入进来。

## 迪米特法则(Law Of Demeter)

> 类与类之间有一串依赖关系时，只和直接联系对象通信。

哪些对象可以直接联系：

- 自己，即this。
- 方法中的参数对象。
- 直接引用的对象，包括其中的对象。
- 当前对象所创建对象。

过度使用迪米特可能会在项目中创建过多中间类。

## 总结

> 尽量遵守这6个规则，根据业务需求来规定类与接口的模式，如果执行不了也可以做出设计牺牲。切不要本末倒置，设计模式的最重要目标就是预测业务变化，在拓展点增加接口，减少代码修改。

- 各单位模块职责清晰(包，接口，类，函数等);

- 模块本身要可升级替换，有种可插拔的感觉;

- 新代码要尽力而为遵守，老代码需要重构时按此原则重构;

- SOLID原则比GOF23的定式重要;

